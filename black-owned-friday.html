<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Black Owned Friday</title>
    <meta property="og:title" content="Black Owned Friday" />
    <meta property="og:description" content="" />
    <meta property="og:url" content="https://futurerob.in" />
    <meta property="og:type" content="website" />
    <meta name="author" content="Robin Hunter" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link href="./styles.css" rel="stylesheet" />
  </head>

  <body class="antialiased">
    <div class="max-w-7xl mx-auto p-6 md:p-10">
      <a
        href="index.html"
        class="text-gray-600 hover:text-black text-m flex justify-between md:mb-16 mb-8"
        style="align-items: center"
      >
        <h1 class="text-2xl md:text-4xl font-bold tracking-tight">
          Robin Hunter
        </h1>
        <h1 class="text-md md:text-2xl tracking-tight">‚ÜñÔ∏è More projects</h1>
      </a>

      <div class="max-w-7xl mt-8 mb-8 mx-auto">
        <h1 class="text-3xl md:text-6xl font-bold tracking-tight">
          Google Black Owned Friday
        </h1>
        <p class="mt-4 text-base md:text-lg text-gray-600 max-w-2xl">
          AI Photobooth, Roblox world.
        </p>
        <div class="text-base text-gray-600 max-w-2xl">
          <p class="mt-2">
            <a
              href="https://uk.burberry.com/c/stories/news/harrods-takeover/"
              target="_blank"
              class="underline hover:text-black"
              >Press Release</a
            >
            <span class="mx-2">&bull;</span>
            <a href="#" target="_blank" class="underline hover:text-black"
              >Other Links</a
            >
          </p>
        </div>
      </div>

      <!-- Simplified Player Component -->
      <div
        class="max-w-md bg-white rounded-xl mb-2 shadow-sm p-4 flex items-center space-x-3"
      >
        <!-- Play/Pause Button -->
        <button
          id="play"
          class="flex-shrink-0 flex items-center justify-center w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        >
          <!-- Play Icon -->
          <svg
            id="play-icon"
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"
            ></path>
          </svg>
          <!-- Pause Icon (hidden by default) -->
          <svg
            id="pause-icon"
            class="w-5 h-5 hidden"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M5.75 4.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75h-1.5zm6.5 0a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75h-1.5z"
            ></path>
          </svg>
        </button>

        <!-- Waveform and Time -->
        <div class="flex-grow flex items-center space-x-3">
          <div id="waveform" class="w-full h-12 cursor-pointer"></div>
          <div class="text-xs font-mono text-gray-500 whitespace-nowrap">
            <span id="current-time">0:00</span> /
            <span id="total-duration">0:00</span>
          </div>
        </div>
      </div>

      <p class="mb-8 text-xs">Listen to a voicenote overview of this project</p>

      <main class="max-w-7xl">
        <p class="mb-4">
          Black Owned Friday is a Google initiative that encourages people to
          support Black-owned businesses, particularly on Black Friday, by
          highlighting them and providing resources to find them. Our team at
          Rehab Agency was tasked with creating an interactive music video
          featuring T-Pain.
          <span class="font-bold"
            >The creative vision was a blend of entertainment and
            e-commerce:</span
          >
          a choose-your-own-adventure film where viewers could shop for products
          from over 50 Black-owned businesses directly from the scenes as the
          story unfolded. screen.
        </p>

        <p class="mb-4">
          <span class="font-bold">
            My role was to lead prototyping and engineering of the custom video
            delivery system</span
          >. Using Node.js, I built a dynamic streaming solution that assembled
          M3U8 video streams on the fly‚Äîinjecting video segments in real time
          based on the user‚Äôs decisions. Like Gromit laying train tracks
          mid-chase, but Javascript. The experience used
          <span class="font-bold"
            >a range of Google Cloud services on the back-end</span
          >, with the backend Node service handling stream logic and video
          delivery. The
          <span class="font-bold">front end was built in Angular</span>,
          integrating the stream seamlessly into a highly polished interface.
        </p>
        <p class="mb-4">
          <span class="font-bold"
            >The biggest challenge was managing latency on poor
            connections</span
          >. We overcame this with smart fallbacks and default journeys so the
          flow would always be setup in good time, but the user could alter its
          course if they interacted with the choose-your-adventure feature. The
          project was a hit and helped cement Google as a long-term client for
          Rehab Agency. Having T-Pain as a stakeholder was fun, you dont say
          that every day!
        </p>

        <p>
          The interactive site is no longer active, but you can play the main
          music video below.
        </p>

        <iframe
          width="100%"
          height="720"
          class="my-8"
          src="https://www.youtube.com/embed/hWuAFclmWsg?si=Z1Ip5Twwdy3XmBxP"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </main>
    </div>
  </body>

  <script type="module">
    // Import WaveSurfer from the ESM CDN link, as your JS code does.
    import WaveSurfer from "https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.esm.js";

    const AUDIO_FILE_URL = "./audio/friday.mp3";

    // Get DOM elements
    const playBtn = document.getElementById("play");
    const playIcon = document.getElementById("play-icon");
    const pauseIcon = document.getElementById("pause-icon");
    const currentTimeEl = document.getElementById("current-time");
    const totalDurationEl = document.getElementById("total-duration");

    // Helper function to format time in MM:SS
    const formatTime = (seconds) => {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = Math.floor(seconds % 60);
      return `${minutes}:${remainingSeconds.toString().padStart(2, "0")}`;
    };

    try {
      // Create a WaveSurfer instance
      const wavesurfer = WaveSurfer.create({
        container: "#waveform",
        height: 48,
        waveColor: "#d1d5db", // gray-300
        progressColor: "#3b82f6", // blue-500
        url: AUDIO_FILE_URL,
        barWidth: 4,
        barGap: 2,
        barRadius: 4,
        cursorWidth: 2,
        cursorColor: "#1f2937", // gray-800
      });

      // --- EVENT LISTENERS (as provided in your JS) ---

      // 1. Play/Pause button click
      playBtn.addEventListener("click", () => {
        wavesurfer.playPause();
      });

      // 2. Update button icon on play
      wavesurfer.on("play", () => {
        playIcon.classList.add("hidden");
        pauseIcon.classList.remove("hidden");
      });

      // 3. Update button icon on pause
      wavesurfer.on("pause", () => {
        playIcon.classList.remove("hidden");
        pauseIcon.classList.add("hidden");
      });

      // 4. Update timer on audio progress
      wavesurfer.on("timeupdate", (currentTime) => {
        currentTimeEl.textContent = formatTime(currentTime);
      });

      // 5. Set initial duration when audio is ready
      wavesurfer.on("ready", (duration) => {
        totalDurationEl.textContent = formatTime(duration);
      });

      // 6. Reset button when audio finishes
      wavesurfer.on("finish", () => {
        playIcon.classList.remove("hidden");
        pauseIcon.classList.add("hidden");
      });
    } catch (error) {
      console.error("Error initializing audio player:", error);
      const waveformContainer = document.getElementById("waveform");
      if (waveformContainer) {
        waveformContainer.innerHTML =
          '<p class="text-red-500 text-xs text-center">Could not load audio.</p>';
      }
    }
  </script>
</html>
